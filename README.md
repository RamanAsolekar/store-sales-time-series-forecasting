# Store Sales ‚Äì Time Series Forecasting

This repository contains a machine learning‚Äìbased solution developed for the **Kaggle Store Sales ‚Äì Time Series Forecasting** competition. The objective is to predict daily sales for multiple product families across different stores in Ecuador using historical data.

The solution implements a **Hybrid Additive Model** that combines linear trend extraction with non-linear gradient boosting to effectively handle both long-term growth and high-frequency seasonality.

---

## üìä Problem Overview

Retail sales forecasting is critical for inventory planning and supply chain optimization. The challenge involves forecasting daily sales while accounting for:
- **Seasonality:** Weekly and yearly cycles.
- **Economic Indicators:** Daily oil prices (highly correlated with Ecuador's economy).
- **Calendar Effects:** Holidays, weekends, and government paydays.

---

## üõ† Approach & Methodology

Unlike standard regression approaches, this solution treats time series forecasting as a two-component problem: **Trend + Seasonality**.

### 1. Data Preprocessing & Feature Engineering
Since tree-based models cannot extrapolate trends well on their own, the features were carefully engineered to capture deterministic patterns:
- **Calendar Features:** Decomposed dates into Year, Month, Day, Day of Week, and Weekend flags.
- **Domain-Specific Logic:**
  - **"Wages Days":** A binary feature flagging the 15th and last day of the month (public sector paydays in Ecuador), which historically correlates with sales spikes.
  - **Oil Prices:** Interpolated missing values to handle weekend gaps in economic data.
  - **Holidays:** Filtered "Transferred" holidays to map only effective days off.

### 2. Hybrid Modeling Architecture
The model uses a **stacking/hybrid approach** to overcome the limitations of individual algorithms:

1.  **Component A (Trend):** A **Ridge Linear Regression** model is trained on a deterministic `time_step` feature. This captures the global upward/downward slope of sales over the years.
2.  **Component B (Seasonality & Residuals):** A **LightGBM (Gradient Boosting)** model is trained to predict the *residuals* (Difference between Actual Sales and Linear Trend). This captures complex patterns like weekly seasonality and holiday spikes.
3.  **Final Prediction:** `Prediction = Linear_Trend_Output + LightGBM_Residual_Output`

### 3. Tech Stack
- **Python**: Core logic.
- **Pandas/NumPy**: Data manipulation and time-series resampling.
- **Scikit-Learn**: Ridge Regression and Label Encoding.
- **LightGBM**: Gradient Boosting for high-performance tabular learning.

---

## üìà Results

- The hybrid approach successfully detrends the data, allowing the tree model to focus purely on cyclical patterns.
- Metric: **Root Mean Squared Logarithmic Error (RMSLE)**.
- The submission file `submission_hybrid.csv` is generated by combining predictions from both models and applying an inverse log transformation (`expm1`).

---

## ‚ö†Ô∏è Dataset Note
The dataset files (`train.csv`, `test.csv`, etc.) are **not included** in this repository in accordance with Kaggle‚Äôs data-sharing policies. Please download them directly from the [competition page](https://www.kaggle.com/c/store-sales-time-series-forecasting).
